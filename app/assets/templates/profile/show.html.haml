.profile

  %form{ role: "form", class: "form-horizontal" }
    .form-group
      %label{ for: "user_email", class: "col-sm-2 control-label" } Email
      .col-sm-5
        %input{ type: "email", class: "form-control", id: "user_email", "ng-model" => "user.email" }
    .form-group
      %label{ for: "user_name", class: "col-sm-2 control-label" } Name
      .col-sm-5
        %input{ type: "text", class: "form-control", id: "user_name", "ng-model" => "user.name" }

    .form-group
      .col-sm-offset-2.col-sm-4
        %buttom{ type: "submit", class: "btn btn-primary btn-sm" } Update Profile


  .user_identities
    .row
      .col-md-1
      .col-md-7

        .panel.panel-default
          .panel-body{ 'ng-show' => "github_identity" }
            Github:
            %a{ "ng-href" => "{{ github_identity.url }}/{{ github_identity.login }}" }
              {{ github_identity.url }}/{{ github_identity.login }}
          .panel-body{ 'ng-hide' => "github_identity" }
            %a{ "ng-href" => "/auth/github", class: "btn btn-success" }
              %i.fa.fa-plus
              Add Github Account

    .row
      .col-md-1
      .col-md-7

        .panel.panel-default{ 'ng-repeat' => 'id in gitlab_identities | orderBy:"id"' }
          .panel-body

            %div{ 'ng-hide' => "id.editable" }
              .pull-right
                %a{ 'ng-click' => "edit(id)", "href" => "javascript://" }
                  %i.fa.fa-edit

              Gitlab:
              %a{ "ng-href" => "{{ id.url }}/{{ id.login }}" }
                {{ github_identity.url }}/{{ github_identity.login }}

              (v{{ id.version }})

            %div{ 'ng-show' => "id.editable" }

              .alert.alert-danger{ 'ng-show' => 'id.error' }
                {{ id.error }}

              %form{ role: "form", class: "", "ng-submit" => "updateGitlabIdentity(id)" }
                .form-group
                  %input{ type: "text", class: "form-control", "ng-model" => "id.login", placeholder: "Login" }
                .form-group
                  %input{ type: "password", class: "form-control", "ng-model" => "id.password", placeholder: "Password" }
                .form-group
                  %input{ type: "text", class: "form-control", id: "gitlab_id_url", "ng-model" => "id.url", placeholder: "Url" }

                .form-group
                  %input{ type: "submit", class: "btn btn-primary btn-sm", value: "Update Gitlab Identity", "ng-disabled" => "id.wait" }
                  or
                  %a{ 'ng-click' => "cancel(id)", href: "javascript://" } Cancel


    .row
      .col-md-1
      .col-md-7

        %a{ "ng-click" => "edit(newGitlab)", class: "btn btn-success btn-sm", href: "javascript://", 'ng-hide' => "newGitlab.editable" }
          %i.fa.fa-plus
          New Gitlab Identity

        .panel.panel-default{ 'ng-show' => 'newGitlab.editable' }
          .panel-body

            .alert.alert-danger{ 'ng-show' => 'newGitlab.error' }
              {{ newGitlab.error }}

            %form{ role: "form", class: "", "ng-submit" => "createGitlabIdentity()" }
              .form-group
                %input{ type: "text", class: "form-control", "ng-model" => "newGitlab.login", placeholder: "Login" }
              .form-group
                %input{ type: "password", class: "form-control", "ng-model" => "newGitlab.password", placeholder: "Password" }
              .form-group
                %input{ type: "text", class: "form-control", id: "gitlab_id_url", "ng-model" => "newGitlab.url", placeholder: "Url" }

              .form-group
                %input{ type: "submit", class: "btn btn-success btn-sm", value: "Create Gitlab Identity", "ng-disabled" => "newGitlab.wait" }
                or
                %a{ 'ng-click' => "cancel(newGitlab)", href: "javascript://" } Cancel

