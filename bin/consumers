#!/usr/bin/env ruby

require File.expand_path("../../config/environment", __FILE__)

trap('INT') {
  Thread.new do
    Evrone::Common::AMQP.shutdown
    Evrone::Common::AMQP::Supervisor::Threaded.shutdown
  end
}

Evrone::Common::AMQP::Supervisor::Threaded.build(
  BuildStatusConsumer => 1,
  JobStatusConsumer => 1,
  JobLogsConsumer => 1
).run
